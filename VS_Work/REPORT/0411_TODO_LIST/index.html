<!DOCTYPE html>
<html lang="ko-kr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" type="text/css" href="./css/app.css">
    <link rel="stylesheet" type="text/css" href="./css/editor.css">
    <link rel="stylesheet" type="text/css" href="./css/header.css">
    <link rel="stylesheet" type="text/css" href="./css/list.css">
</head>
<style>
    /*CSSëŠ” ì™¸ë¶€ íŒŒì¼ë¡œ*/
</style>

<body>
    <div class="app">
        <header>
            <h3> Todo List : ì˜¤ëŠ˜ì˜ PlanğŸ˜</h3>
            <h1 id="date-title"><time id="today-date-title">ì˜¤ëŠ˜ ë‚ ì§œ ë…„ ì›” ì¼</time>
        </header>
        <div class="editor">
            <input type="text" id="input-todo" placeholder="ìƒˆë¡œìš´ í•  ì¼ ì…ë ¥">
            <button id="add-todo">ì¶”ê°€</button>
        </div>
        <main>
            <div class="search-input">
                <h3>todo-list</h3>
                <input type="text" id="search-todo" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”.">
            </div>
            <div class="todo-item" id="todo-item">
                <!-- ì´ ì˜ì—­ì€ JSë¡œ ì¶œë ¥ -->
            </div>
    </div>
    </main>
    <footer id="footer">
        <div class="footer-text">
            <ul>
                <li>2025-04-11</li>
                <li>Park Jaehyun</li>
            </ul>
        </div>
    </footer>
    </div>
</body>
<script>

    const returnToday = function () {
        const today = new Date();//í˜„ì¬ ë‚ ì§œë¥¼ ë³€ìˆ˜ì— ì €ì¥
        const formattedDate = today.toISOString().split('T')[0];// ë‚ ì§œë¥¼ YYYY-MM-DD í˜•ì‹ìœ¼ë¡œ ë³€í™˜
        return formattedDate;//todayDateTitle ìš”ì†Œì— ë‚ ì§œ ì…ë ¥
    }

    const setToday = function (target) {
        // target : ì˜¤ëŠ˜ ë‚ ì§œë¥¼ í‘œì‹œí•  ìš”ì†Œ
        const todayDateTitle = target;
        const formattedDate = returnToday();
        todayDateTitle.innerText = formattedDate;//todayDateTitle ìš”ì†Œì— ë‚ ì§œ ì…ë ¥
    }

    setToday(document.getElementById('today-date-title'));

    let list = [];
    let currentId = 0; // ğŸŸ© ì „ì—­ ID ë³€ìˆ˜ë¡œ ì¤‘ë³µ ë°©ì§€
    list.push({ id: currentId++, complete: false, text: 'í•  ì¼ 1', date: returnToday() });
    list.push({ id: currentId++, complete: false, text: 'í•  ì¼ 2', date: returnToday() });
    list.push({ id: currentId++, complete: false, text: 'í•  ì¼ 3', date: returnToday() });

    const addTodoList = function () {
        const inputTodo = document.getElementById('input-todo');
        const todoText = inputTodo.value;
        const todayDateTitle = document.getElementById('today-date-title').innerText;
        const todoId = currentId++; // ğŸŸ© ì¤‘ë³µ ë°©ì§€ë¥¼ ìœ„í•´ ì „ì—­ ID ì‚¬ìš© (ì‚­ì œëœ í•­ëª©ì˜ ì¸ë±ìŠ¤ ì¬ì‚¬ìš©í•˜ì§€ ì•Šê³  ìƒˆë¡œìš´ id ê³„ì†í•´ì„œ ë¶€ì—¬)
        const todoComplete = false;
        if (todoText === '') {
            alert('í•  ì¼ì„ ì…ë ¥í•˜ì„¸ìš”.');
            return;
        }

        list.push({ id: todoId, complete: todoComplete, text: todoText, date: todayDateTitle });
        inputTodo.value = '';//input ì´ˆê¸°í™”
        renderTodoList(list);
    }

    const renderTodoList = function (list) {
        let listPrint = [...list];
        const todoItem = document.querySelector('#todo-item');
        todoItem.innerHTML = ""; //ê·¸ë¦¬ê¸° ì „ ì´ˆê¸°í™”
        for (let i = 0; i < listPrint.length; i++) {
            todoItem.innerHTML += `<div class='todo-item-detail'>` +
                `<input type='checkbox' id='todo-${listPrint[i].id}' ${listPrint[i].complete ? 'checked' : ''} data-todo-id='${listPrint[i].id}' onChange='toggleTodoComplete(${listPrint[i].id})'>` +
                `<label class='todo-text' for='todo-${listPrint[i].id}'>${listPrint[i].text}</label>` +
                `<time>${listPrint[i].date}</time>` +
                `<button class='delete-todo' onclick='deleteTodoList(${listPrint[i].id})'>ì‚­ì œ</button>` +
                `</div>`;
        }
        if (listPrint.length === 0) todoItem.innerHTML = "<div class='todo-item-detail'><label>í•  ì¼ì´ ì—†ìŠµë‹ˆë‹¤.</label></div>";
    }

    const deleteTodoList = function (target_id) {
        alert('ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
        //listì—ì„œ  target_idì— í•´ë‹¹í•˜ëŠ” todo ì‚­ì œ
        list = list.filter(function (item) {
            return item.id !== target_id;
        });
        renderTodoList(list);
    }

    const toggleTodoComplete = function (target_id) {
        // target_idì— í•´ë‹¹í•˜ëŠ” todoì˜ complete ì†ì„± ë³€ê²½
        let checkbox = document.querySelector(`input[data-todo-id='${target_id}']`);
        list = list.map(function (item) {
            if (item.id === target_id) {
                item.complete = !item.complete;
            }
            return item;
        });
        renderTodoList(list);
    }

    const searchTodoList = function () {
        let value = document.getElementById('search-todo').value; // search-todoì˜ ê°’
        let result = list.filter(item => item.text.includes(value)); // valueì— search-todoì˜ ê°’ì— ìˆëŠ” ê°’ì„ í¬í•¨í•˜ëŠ” todo list
        renderTodoList(result); // í•„í„°ë§ëœ todo listë¥¼ ë Œë”ë§
    }

    document.getElementById('add-todo').addEventListener('click', addTodoList);
    document.getElementById('search-todo').addEventListener('keyup', searchTodoList)


    renderTodoList(list);//ì´ˆê¸° list ë Œë”ë§

</script>